layui.define(function(c){var d=window;var a={path:"",skin:"default",format:"YYYY-MM-DD",min:"1900-01-01 00:00:00",max:"2099-12-31 23:59:59",isv:false,init:true};var g={},e=document,f="createElement",h="getElementById",i="getElementsByTagName";var b=["laydate_box","laydate_void","laydate_click","LayDateSkin","skins/","/laydate.css"];d.laydate=function(j){j=j||{};g.run(j);return laydate};laydate.v="1.1";g.trim=function(j){j=j||"";return j.replace(/^\s|\s$/g,"").replace(/\s+/g," ")};g.digit=function(j){return j<10?"0"+(j|0):j};g.stopmp=function(j){j=j||d.event;j.stopPropagation?j.stopPropagation():j.cancelBubble=true;return this};g.each=function(k,m){var l=0,j=k.length;for(;l<j;l++){if(m(l,k[l])===false){break}}};g.hasClass=function(k,j){k=k||{};return new RegExp("\\b"+j+"\\b").test(k.className)};g.addClass=function(k,j){k=k||{};g.hasClass(k,j)||(k.className+=" "+j);k.className=g.trim(k.className);return this};g.removeClass=function(l,j){l=l||{};if(g.hasClass(l,j)){var k=new RegExp("\\b"+j+"\\b");l.className=l.className.replace(k,"")}return this};g.removeCssAttr=function(l,j){var k=l.style;if(k.removeProperty){k.removeProperty(j)}else{k.removeAttribute(j)}};g.shde=function(k,j){k.style.display=j?"none":"block"};g.query=function(k){if(k&&k.nodeType===1){if(k.tagName.toLowerCase()!=="input"){throw new Error("选择器elem错误")}return k}var k=(g.trim(k)).split(" "),n=e[h](k[0].substr(1)),j;if(!n){return}else{if(!k[1]){return n}else{if(/^\./.test(k[1])){var m,o=k[1].substr(1),l=new RegExp("\\b"+o+"\\b");j=[];m=e.getElementsByClassName?n.getElementsByClassName(o):n[i]("*");g.each(m,function(p,q){l.test(q.className)&&j.push(q)});return j[0]?j:""}else{j=n[i](k[1]);return j[0]?n[i](k[1]):""}}}};g.on=function(k,l,j){k.attachEvent?k.attachEvent("on"+l,function(){j.call(k,d.even)}):k.addEventListener(l,j,false);return g};g.stopMosup=function(j,k){if(j!=="mouseup"){g.on(k,"mouseup",function(l){g.stopmp(l)})}};g.run=function(j){var k=g.query,l=j.elem,m;if(!l){return}b.elemv=/textarea|input/.test(l.tagName.toLocaleLowerCase())?"value":"innerHTML";if(("init" in j?j.init:a.init)&&(!l[b.elemv])){l[b.elemv]=laydate.now(null,j.format||a.format)}g.view(l,j);g.reshow()};g.scroll=function(j){j=j?"scrollLeft":"scrollTop";return e.body[j]|e.documentElement[j]};g.winarea=function(j){return document.documentElement[j?"clientWidth":"clientHeight"]};g.isleap=function(j){return(j%4===0&&j%100!==0)||j%400===0};g.checkVoid=function(j,m,k){var l=[];j=j|0;m=m|0;k=k|0;if(j<g.mins[0]){l=["y"]}else{if(j>g.maxs[0]){l=["y",1]}else{if(j>=g.mins[0]&&j<=g.maxs[0]){if(j==g.mins[0]){if(m<g.mins[1]){l=["m"]}else{if(m==g.mins[1]){if(k<g.mins[2]){l=["d"]}}}}if(j==g.maxs[0]){if(m>g.maxs[1]){l=["m",1]}else{if(m==g.maxs[1]){if(k>g.maxs[2]){l=["d",1]}}}}}}}return l};g.timeVoid=function(k,j){if(g.ymd[1]+1==g.mins[1]&&g.ymd[2]==g.mins[2]){if(j===0&&(k<g.mins[3])){return 1}else{if(j===1&&k<g.mins[4]){return 1}else{if(j===2&&k<g.mins[5]){return 1}}}}else{if(g.ymd[1]+1==g.maxs[1]&&g.ymd[2]==g.maxs[2]){if(j===0&&k>g.maxs[3]){return 1}else{if(j===1&&k>g.maxs[4]){return 1}else{if(j===2&&k>g.maxs[5]){return 1}}}}}if(k>(j?59:23)){return 1}};g.check=function(){var k=g.options.format.replace(/YYYY|MM|DD|hh|mm|ss/g,"\\d+\\").replace(/\\$/g,"");var n=new RegExp(k),l=g.elem[b.elemv];var j=l.match(/\d+/g)||[],m=g.checkVoid(j[0],j[1],j[2]);if(l.replace(/\s/g,"")!==""){if(!n.test(l)){g.elem[b.elemv]="";g.msg("日期不符合格式，请重新选择。");return 1}else{if(m[0]){g.elem[b.elemv]="";g.msg("日期不在有效期内，请重新选择。");return 1}else{m.value=g.elem[b.elemv].match(n).join();j=m.value.match(/\d+/g);if(j[1]<1){j[1]=1;m.auto=1}else{if(j[1]>12){j[1]=12;m.auto=1}else{if(j[1].length<2){m.auto=1}}}if(j[2]<1){j[2]=1;m.auto=1}else{if(j[2]>g.months[(j[1]|0)-1]){j[2]=31;m.auto=1}else{if(j[2].length<2){m.auto=1}}}if(j.length>3){if(g.timeVoid(j[3],0)){m.auto=1}if(g.timeVoid(j[4],1)){m.auto=1}if(g.timeVoid(j[5],2)){m.auto=1}}if(m.auto){g.creation([j[0],j[1]|0,j[2]|0],1)}else{if(m.value!==g.elem[b.elemv]){g.elem[b.elemv]=m.value}}}}}};g.months=[31,null,31,30,31,30,31,31,30,31,30,31];g.viewDate=function(n,o,m){var k=g.query,l={},j=new Date();n<(g.mins[0]|0)&&(n=(g.mins[0]|0));n>(g.maxs[0]|0)&&(n=(g.maxs[0]|0));j.setFullYear(n,o,m);l.ymd=[j.getFullYear(),j.getMonth(),j.getDate()];g.months[1]=g.isleap(l.ymd[0])?29:28;j.setFullYear(l.ymd[0],l.ymd[1],1);l.FDay=j.getDay();l.PDay=g.months[o===0?11:o-1]-l.FDay+1;l.NDay=1;g.each(b.tds,function(r,s){var p=l.ymd[0],t=l.ymd[1]+1,q;s.className="";if(r<l.FDay){s.innerHTML=q=r+l.PDay;g.addClass(s,"laydate_nothis");t===1&&(p-=1);t=t===1?12:t-1}else{if(r>=l.FDay&&r<l.FDay+g.months[l.ymd[1]]){s.innerHTML=q=r-l.FDay+1;if(r-l.FDay+1===l.ymd[2]){g.addClass(s,b[2]);l.thisDay=s}}else{s.innerHTML=q=l.NDay++;g.addClass(s,"laydate_nothis");t===12&&(p+=1);t=t===12?1:t+1}}if(g.checkVoid(p,t,q)[0]){g.addClass(s,b[1])}g.options.festival&&g.festival(s,t+"."+q);s.setAttribute("y",p);s.setAttribute("m",t);s.setAttribute("d",q);p=t=q=null});g.valid=!g.hasClass(l.thisDay,b[1]);g.ymd=l.ymd;b.year.value=g.ymd[0]+"年";b.month.value=g.digit(g.ymd[1]+1)+"月";g.each(b.mms,function(p,q){var r=g.checkVoid(g.ymd[0],(q.getAttribute("m")|0)+1);if(r[0]==="y"||r[0]==="m"){g.addClass(q,b[1])}else{g.removeClass(q,b[1])}g.removeClass(q,b[2]);r=null});g.addClass(b.mms[g.ymd[1]],b[2]);l.times=[g.inymd[3]|0||0,g.inymd[4]|0||0,g.inymd[5]|0||0];g.each(new Array(3),function(p){g.hmsin[p].value=g.digit(g.timeVoid(l.times[p],p)?g.mins[p+3]|0:l.times[p]|0)});g[g.valid?"removeClass":"addClass"](b.ok,b[1])};g.festival=function(l,j){var k;switch(j){case"1.1":k="元旦";break;case"3.8":k="妇女";break;case"4.5":k="清明";break;case"5.1":k="劳动";break;case"6.1":k="儿童";break;case"9.10":k="教师";break;case"10.1":k="国庆";break}k&&(l.innerHTML=k);k=null};g.viewYears=function(j){var k=g.query,l="";g.each(new Array(14),function(m){if(m===7){l+="<li "+(parseInt(b.year.value)===j?'class="'+b[2]+'"':"")+' y="'+j+'">'+j+"年</li>"}else{l+='<li y="'+(j-7+m)+'">'+(j-7+m)+"年</li>"}});k("#laydate_ys").innerHTML=l;g.each(k("#laydate_ys li"),function(m,n){if(g.checkVoid(n.getAttribute("y"))[0]==="y"){g.addClass(n,b[1])}else{g.on(n,"click",function(o){g.stopmp(o).reshow();g.viewDate(this.getAttribute("y")|0,g.ymd[1],g.ymd[2])})}})};g.initDate=function(){var k=g.query,l={},j=new Date();var m=g.elem[b.elemv].match(/\d+/g)||[];if(m.length<3){m=g.options.start.match(/\d+/g)||[];if(m.length<3){m=[j.getFullYear(),j.getMonth()+1,j.getDate()]}}g.inymd=m;g.viewDate(m[0],m[1]-1,m[2])};g.iswrite=function(){var j=g.query,k={time:j("#laydate_hms")};g.shde(k.time,!g.options.istime);g.shde(b.oclear,!("isclear" in g.options?g.options.isclear:1));g.shde(b.otoday,!("istoday" in g.options?g.options.istoday:1));g.shde(b.ok,!("issure" in g.options?g.options.issure:1))};g.orien=function(k,m){var l,j=g.elem.getBoundingClientRect();k.style.left=j.left+(m?0:g.scroll(1))+"px";if(j.bottom+k.offsetHeight/1.5<=g.winarea()){l=j.bottom-1}else{l=j.top>k.offsetHeight/1.5?j.top-k.offsetHeight+1:g.winarea()-k.offsetHeight}k.style.top=Math.max(l+(m?0:g.scroll()),1)+"px"};g.follow=function(j){if(g.options.fixed){j.style.position="fixed";g.orien(j,1)}else{j.style.position="absolute";g.orien(j)}};g.viewtb=(function(){var o,j=[],m=["日","一","二","三","四","五","六"];var k={},l=e[f]("table"),n=e[f]("thead");n.appendChild(e[f]("tr"));k.creath=function(p){var q=e[f]("th");q.innerHTML=m[p];n[i]("tr")[0].appendChild(q);q=null};g.each(new Array(6),function(p){j.push([]);o=l.insertRow(0);g.each(new Array(7),function(q){j[p][q]=0;p===0&&k.creath(q);o.insertCell(q)})});l.insertBefore(n,l.children[0]);l.id=l.className="laydate_table";o=j=null;return l.outerHTML.toLowerCase()}());g.view=function(m,j){var k=g.query,n,l={};j=j||m;g.elem=m;g.options=j;g.options.format||(g.options.format=a.format);g.options.start=g.options.start||"";g.mm=l.mm=[g.options.min||a.min,g.options.max||a.max];g.mins=l.mm[0].match(/\d+/g);g.maxs=l.mm[1].match(/\d+/g);if(!g.box){n=e[f]("div");n.id=b[0];n.className=b[0];n.style.cssText="position: absolute;";n.setAttribute("name","laydate-v"+laydate.v);n.innerHTML=l.html='<div class="laydate_top"><div class="laydate_ym laydate_y" id="laydate_YY"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_y" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms"><a class="laydate_tab laydate_chtop"><cite></cite></a><ul id="laydate_ys"></ul><a class="laydate_tab laydate_chdown"><cite></cite></a></div></div><div class="laydate_ym laydate_m" id="laydate_MM"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_m" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms" id="laydate_ms">'+function(){var o="";g.each(new Array(12),function(p){o+='<span m="'+p+'">'+g.digit(p+1)+"月</span>"});return o}()+"</div></div></div>"+g.viewtb+'<div class="laydate_bottom"><ul id="laydate_hms"><li class="laydate_sj">时间</li><li><input readonly>:</li><li><input readonly>:</li><li><input readonly></li></ul><div class="laydate_time" id="laydate_time"></div><div class="laydate_btn"><a id="laydate_clear">清空</a><a id="laydate_today">今天</a><a id="laydate_ok">确认</a></div>'+(a.isv?'<a href="http://sentsin.com/layui/laydate/" class="laydate_v" target="_blank">laydate-v'+laydate.v+"</a>":"")+"</div>";e.body.appendChild(n);g.box=k("#"+b[0]);g.events();n=null}else{g.shde(g.box)}g.follow(g.box);j.zIndex?g.box.style.zIndex=j.zIndex:g.removeCssAttr(g.box,"z-index");g.stopMosup("click",g.box);g.initDate();g.iswrite();g.check()};g.reshow=function(){g.each(g.query("#"+b[0]+" .laydate_show"),function(j,k){g.removeClass(k,"laydate_show")});return this};g.close=function(){g.reshow();g.shde(g.query("#"+b[0]),1);g.elem=null};g.parse=function(k,j,l){k=k.concat(j);l=l||(g.options?g.options.format:a.format);return l.replace(/YYYY|MM|DD|hh|mm|ss/g,function(n,m){k.index=++k.index|0;return g.digit(k[k.index])})};g.creation=function(n,l){var k=g.query,m=g.hmsin;var j=g.parse(n,[m[0].value,m[1].value,m[2].value]);g.elem[b.elemv]=j;if(!l){g.close();typeof g.options.choose==="function"&&g.options.choose(j)}};g.events=function(){var j=g.query,k={box:"#"+b[0]};g.addClass(e.body,"laydate_body");b.tds=j("#laydate_table td");b.mms=j("#laydate_ms span");b.year=j("#laydate_y");b.month=j("#laydate_m");g.each(j(k.box+" .laydate_ym"),function(l,m){g.on(m,"click",function(n){g.stopmp(n).reshow();g.addClass(this[i]("div")[0],"laydate_show");if(!l){k.YY=parseInt(b.year.value);g.viewYears(k.YY)}})});g.on(j(k.box),"click",function(){g.reshow()});k.tabYear=function(l){if(l===0){g.ymd[0]--}else{if(l===1){g.ymd[0]++}else{if(l===2){k.YY-=14}else{k.YY+=14}}}if(l<2){g.viewDate(g.ymd[0],g.ymd[1],g.ymd[2]);g.reshow()}else{g.viewYears(k.YY)}};g.each(j("#laydate_YY .laydate_tab"),function(l,m){g.on(m,"click",function(n){g.stopmp(n);k.tabYear(l)})});k.tabMonth=function(l){if(l){g.ymd[1]++;if(g.ymd[1]===12){g.ymd[0]++;g.ymd[1]=0}}else{g.ymd[1]--;if(g.ymd[1]===-1){g.ymd[0]--;g.ymd[1]=11}}g.viewDate(g.ymd[0],g.ymd[1],g.ymd[2])};g.each(j("#laydate_MM .laydate_tab"),function(l,m){g.on(m,"click",function(n){g.stopmp(n).reshow();k.tabMonth(l)})});g.each(j("#laydate_ms span"),function(l,m){g.on(m,"click",function(n){g.stopmp(n).reshow();if(!g.hasClass(this,b[1])){g.viewDate(g.ymd[0],this.getAttribute("m")|0,g.ymd[2])}})});g.each(j("#laydate_table td"),function(l,m){g.on(m,"click",function(n){if(!g.hasClass(this,b[1])){g.stopmp(n);g.creation([this.getAttribute("y")|0,this.getAttribute("m")|0,this.getAttribute("d")|0])}})});b.oclear=j("#laydate_clear");g.on(b.oclear,"click",function(){g.elem[b.elemv]="";g.close()});b.otoday=j("#laydate_today");g.on(b.otoday,"click",function(){var l=new Date();g.creation([l.getFullYear(),l.getMonth()+1,l.getDate()])});b.ok=j("#laydate_ok");g.on(b.ok,"click",function(){if(g.valid){g.creation([g.ymd[0],g.ymd[1]+1,g.ymd[2]])}});k.times=j("#laydate_time");g.hmsin=k.hmsin=j("#laydate_hms input");k.hmss=["小时","分钟","秒数"];k.hmsarr=[];g.msg=function(l,n){var m='<div class="laydte_hsmtex">'+(n||"提示")+"<span>×</span></div>";if(typeof l==="string"){m+="<p>"+l+"</p>";g.shde(j("#"+b[0]));g.removeClass(k.times,"laydate_time1").addClass(k.times,"laydate_msg")}else{if(!k.hmsarr[l]){m+='<div id="laydate_hmsno" class="laydate_hmsno">';g.each(new Array(l===0?24:60),function(o){m+="<span>"+o+"</span>"});m+="</div>";k.hmsarr[l]=m}else{m=k.hmsarr[l]}g.removeClass(k.times,"laydate_msg");g[l===0?"removeClass":"addClass"](k.times,"laydate_time1")}g.addClass(k.times,"laydate_show");k.times.innerHTML=m};k.hmson=function(l,m){var n=j("#laydate_hmsno span"),o=g.valid?null:1;g.each(n,function(p,q){if(o){g.addClass(q,b[1])}else{if(g.timeVoid(p,m)){g.addClass(q,b[1])}else{g.on(q,"click",function(r){if(!g.hasClass(this,b[1])){l.value=g.digit(this.innerHTML|0)}})}}});g.addClass(n[l.value|0],"laydate_click")};g.each(k.hmsin,function(l,m){g.on(m,"click",function(n){g.stopmp(n).reshow();g.msg(l,k.hmss[l]);k.hmson(this,l)})});g.on(e,"mouseup",function(){var l=j("#"+b[0]);if(l&&l.style.display!=="none"){g.check()||g.close()}}).on(e,"keydown",function(m){m=m||d.event;var l=m.keyCode;if(l===13&&g.elem){g.creation([g.ymd[0],g.ymd[1]+1,g.ymd[2]])}})};laydate.reset=function(){(g.box&&g.elem)&&g.follow(g.box)};laydate.now=function(k,l){var j=new Date((k|0)?function(m){return m<86400000?(+new Date+m*86400000):m}(parseInt(k)):+new Date);return g.parse([j.getFullYear(),j.getMonth()+1,j.getDate()],[j.getHours(),j.getMinutes(),j.getSeconds()],l)};layui.addcss("modules/laydate/laydate.css",function(){},"laydatecss");c("laydate",laydate)});