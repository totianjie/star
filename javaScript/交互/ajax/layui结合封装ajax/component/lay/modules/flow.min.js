layui.define("jquery",function(a){var c=layui.jquery,e=function(f){},b="layui-flow-more",d='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';e.prototype.load=function(v){var o=this,q=0,t,g,m,f;v=v||{};var h=c(v.elem);if(!h[0]){return}var i=c(v.scrollElem||document);var r=v.mb||50;var n="isAuto" in v?v.isAuto:true;var j=v.end||"没有更多了";var u=v.scrollElem&&v.scrollElem!==document;var s="<cite>加载更多</cite>",p=c('<div class="layui-flow-more"><a href="javascript:;">'+s+"</a></div>");if(!h.find(".layui-flow-more")[0]){h.append(p)}var l=function(w,x){w=c(w);p.before(w);x=x==0?true:null;x?p.html(j):p.find("a").html(s);g=x;t=null;m&&m()};var k=function(){t=true;p.find("a").html(d);typeof v.done==="function"&&v.done(++q,l)};k();p.find("a").on("click",function(){var w=c(this);if(g){return}t||k()});if(v.isLazyimg){var m=o.lazyimg({elem:v.elem+" img",scrollElem:v.scrollElem})}if(!n){return o}i.on("scroll",function(){var w=c(this),x=w.scrollTop();if(f){clearTimeout(f)}if(g){return}f=setTimeout(function(){var y=u?w.height():c(window).height();var z=u?w.prop("scrollHeight"):document.documentElement.scrollHeight;if(z-x-y<=r){t||k()}},100)});return o};e.prototype.lazyimg=function(o){var k=this,l=0,i;o=o||{};var j=c(o.scrollElem||document);var h=o.elem||"img";var n=o.scrollElem&&o.scrollElem!==document;var m=function(s,p){var u=j.scrollTop(),r=u+p;var q=n?function(){return s.offset().top-j.offset().top+u}():s.offset().top;if(q>=u&&q<=r){if(!s.attr("src")){var t=s.attr("lay-src");layui.img(t,function(){var v=k.lazyimg.elem.eq(l);s.attr("src",t).removeAttr("lay-src");v[0]&&g(v);l++})}}},g=function(v,q){var p=n?(q||j).height():c(window).height();var w=j.scrollTop(),s=w+p;k.lazyimg.elem=c(h);if(v){m(v,p)}else{for(var t=0;t<k.lazyimg.elem.length;t++){var u=k.lazyimg.elem.eq(t),r=n?function(){return u.offset().top-j.offset().top+w}():u.offset().top;m(u,p);l=t;if(r>s){break}}}};g();if(!i){var f;j.on("scroll",function(){var p=c(this);if(f){clearTimeout(f)}f=setTimeout(function(){g(null,p)},50)});i=true}return g};a("flow",new e())});